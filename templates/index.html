{% extends "base.html" %} 
{% block home %}

    <div class="center">
        <h2>{{ page_title }}</h2>
    </div>

    <!-- carousel from materialize -->
    <div class="carousel carousel-slider center">
<!-- all movie posters -->
{% for movie in movie_names %}
        <figure>
            <a class="carousel-item" href="#{{ movie.movie_poster }}">
                <img src="{{ movie.movie_poster }}" alt="A picture of a movie poster showing at Cinemagic.">
            </a>
        </figure>
{% endfor %}
    </div>

    <div class="center">
        <a class="booking-btn col s12 btn waves-effect yellow black-text darken-text-4 modal-trigger" href="#modal1">BOOK NOW</a>
    </div>

    <!-- book tickets: modal -->
    <!-- modal from materialize -->
    <div id="modal1" class="modal">
        <div class="right-align">
           <i class="fas fa-times modal-close"></i> 
        </div>
        <div class="modal-content">       
            <form method="POST" action="{{ url_for('home') }}" class="black-text">
                <h4 class="modal-titles center">Book Tickets</h4>

                <div class="form-item">
                    <label for="bookedMovie"></label>              
                    <select id="bookedMovie" name="bookedMovie" class="input-field" required>
                        <option value="" disabled selected>Select Movie</option>
                        {% for movie_name in movie_names %}
                            <option value="{{ movie_name.movie_name }}">{{ movie_name.movie_name }}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="form-item">
                    <label for="ticketQuantity">Ticket Quantity</label>
                    <input type="number" id="ticketQuantity" name="ticketQuantity" min="1" required>      
                </div>

                <div class="form-item">
                    <label for="date">Date</label>
                    <input id="date" name="date" type="text" class="datepicker" required>                    
                </div>                                

                <div class="form-item">
                    <label for="location">Location</label>                   
                    <select id="location" name="location" class="input-field select-boxes" required>
                        <option value="" disabled selected></option>
                        {% for location_name in location_names %}
                            <option value="{{ location_name.location_name }}">{{ location_name.location_name }}</option>
                        {% endfor %}
                    </select>                      
                </div>

                <div class="center">
                    <button type="submit" class="btn btn-flat waves-effect waves-black yellow black-text darken-text-4 booking-btn">SUBMIT</button>
                </div>

            </form>
        </div>
    </div>

    <div class="center">
        <h3>{{ page_subtitle }}</h3>
    </div>

    {% for movie in movie_names %}
        <!-- all movies and reviews -->
        <div id="movieReviews">

            {% if loop.index % 2 != 0 %}
                <h4 id="{{ movie.movie_poster }}" class="movie-titles">{{movie.movie_name}}</h4>
                <div class="container movie-review"> 
                    <div class="row">
                        <figure class="col s6">       
                            <img class="review-pictures" src="{{ movie.movie_poster }}" alt="A picture of a movie poster showing at Cinemagic.">
                        </figure>
                        <div class="col s6">
                            <div class="flip-stars center star-average">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>  
                            <div class="center">
                                <a class="btn waves-effect yellow black-text darken-text-4 booking-btn modal-trigger" href="#modal1">BOOK NOW</a>
                            </div>
                        </div>          
                    </div>
                    <div class="review-box">
                        {% for review in reviews %}
                            <p>{{ review.user_review }}</p>
                            <p><b><i>~{{ review.user }}</i></b></p>
                        {% endfor %}
                    </div>
                </div>
                <hr class="hr-line">
            {% else %}
                <h4 id="{{ movie.movie_poster }}" class="movie-titles">{{movie.movie_name}}</h4>
                <div class="container movie-review"> 
                    <div class="row">
                        <div class="col s6">
                            <div class="flip-stars center star-average">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </div>  
                            <div class="center">
                                <a class="btn waves-effect yellow black-text darken-text-4 booking-btn modal-trigger" href="#modal1">BOOK NOW</a>
                            </div>
                        </div>  
                        <figure class="col s6">       
                            <img class="review-pictures" src="{{ movie.movie_poster }}" alt="A picture of a movie poster showing at Cinemagic.">
                        </figure>
                    </div>
                    <div class="review-box">
                        {% for review in reviews %}
                            <p>{{ review.user_review }}</p>
                            <p><b><i>~{{ review.user }}</i></b></p>
                        {% endfor %}
                    </div>
                </div>
                {% if loop.index != 10 %}
                    <hr class="hr-line">
                {% endif %}
            {% endif %}      
        </div>
    {% endfor %}

{% endblock %}
